(page "index.html"
  (:require [castra.core :refer [mkremote]]))

(defc state nil)
(defc error nil)
(defc loading [])

(defc= random-number  (get state :random))
(defc= session-number (get state :session))

(def get-state
  (mkremote 'panoply.backend.api/get-state state error loading))

(defn load!
  []
  (get-state))

(with-init! (load!))

(html
  (head
    (title "Panoply"))
  (body
    (h1 "Panoply")
    (p (text state))
    (button :click #(get-state) "Get State")))
